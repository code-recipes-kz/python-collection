"""
Функция street_fighter_selection принимает на вход три аргумента: fighters - список персонажей в виде 2D-сетки, initial_position - начальные координаты позиции выбора в формате (row, col), и moves - список движений курсора, который указывает, в каком направлении двигаться.

Внутри функции создается пустой список selected_fighters, в который будут добавляться имена выбранных персонажей.

Затем функция определяет функцию move_cursor, которая будет возвращать новые координаты при движении курсора. Эта функция использует оператор % для реализации циклического движения по горизонтали, чтобы курсор "зацикливался" при достижении края сетки персонажей.

Далее функция проходит по каждому шагу движения курсора из списка moves. Для каждого шага она вызывает функцию move_cursor с текущими координатами позиции выбора (current_row и current_col) и текущим направлением движения из списка moves. Полученные новые координаты записываются в переменные current_row и current_col.

После этого функция добавляет имя персонажа, находящегося в текущей позиции выбора, в список selected_fighters.

После завершения цикла по всем движениям курсора, функция возвращает список selected_fighters, содержащий имена выбранных персонажей в порядке их выбора.

Вся логика работы с переходами между клетками и выбором персонажей осуществляется с помощью индексов 2D-сетки fighters и функции move_cursor, которая определяет новые координаты позиции выбора в зависимости от текущего направления движения.
"""

# tags: Arrays, Lists, Fundamentals, Graph theory
# kyu: 6

def street_fighter_selection(fighters, initial_position, moves):
    # Создаем список, в который будем добавлять выбранных персонажей
    selected_fighters = []

    # Получаем количество строк и столбцов в сетке персонажей
    rows = len(fighters)
    cols = len(fighters[0])

    # Получаем начальные координаты позиции выбора
    current_row, current_col = initial_position

    # Определяем функцию, которая будет возвращать новые координаты при движении курсора
    def move_cursor(row, col, direction):
        # Используем оператор % для реализации циклического движения по горизонтали
        if direction == 'left':
            col = (col - 1) % cols
        elif direction == 'right':
            col = (col + 1) % cols
        # Проверяем, чтобы курсор не выходил за пределы вертикально
        elif direction == 'up' and row > 0:
            row = row - 1
        elif direction == 'down' and row < rows - 1:
            row = row + 1
        return row, col

    # Проходим по каждому шагу движения курсора
    for move in moves:
        # Получаем новые координаты позиции выбора
        current_row, current_col = move_cursor(current_row, current_col, move)
        # Добавляем имя выбранного персонажа в список
        selected_fighters.append(fighters[current_row][current_col])

    # Возвращаем список выбранных персонажей
    return selected_fighters
